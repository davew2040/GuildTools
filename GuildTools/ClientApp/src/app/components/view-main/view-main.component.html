<div class="player-main-content" fxLayout="column">
  <div fxLayout="row" fxLayoutAlign="end" class="delete-main-container">
    <a *ngIf="isAdmin" (click)="removeMain(playerMain)">Delete Main</a>
  </div>
  <div fxLayout="column" *ngIf="playerMain.alts && playerMain.alts.length > 0">
    <div class="group-title">Alts:</div>
    <table fxFlex class="alts-table">
      <tr
        *ngFor="let alt of playerMain.alts"
        [ngClass]="getRowClass(alt)"
        (mouseenter)="onMouseEnter($event)"
        (mouseleave)="onMouseLeave($event)"
        [contextMenu]="contextMenu"
        [contextMenuSubject]="alt"
      >
        <td class="player-name-col">
          {{ alt.player.name }}
        </td>
        <td class="player-desc-col">
          {{ getAltDescription(alt) }}
        </td>
        <td class="player-actions-col" *ngIf="isAdmin">
          <div
            class="hidden"
            fxLayout="row"
            fxLayoutAlign="end"
            fxLayoutGap="5px"
          >
            <a (click)="removeAlt(playerMain, alt)">Delete</a>
            <div>|</div>
            <a>Promote</a>
          </div>
        </td>
      </tr>
    </table>
  </div>
  <div
    class="no-alts"
    fxLayout="column"
    fxLayoutAlign="center"
    *ngIf="!playerMain.alts || playerMain.alts.length === 0"
  >
    Player has no alts.
  </div>

  <div fxLayout="column" style="margin-top: 25px;">
    <div class="group-title">Notes:</div>
    <div class="notes-container">
      <app-player-notes-component
        [text]="playerMain.notes"
        [isAdmin]="isAdmin"
        (notesChanged)="onPlayerNotesChanged($event)"
      ></app-player-notes-component>
    </div>
  </div>

  <div fxLayout="column" style="margin-top: 25px;" *ngIf="isAdmin">
      <div class="group-title">Officer Notes:</div>
      <div class="notes-container">
        <app-player-notes-component
          [text]="playerMain.officerNotes"
          [isAdmin]="isAdmin"
          (notesChanged)="onOfficerNotesChanged($event)"
        ></app-player-notes-component>
      </div>
    </div>
</div>

<context-menu>
  <ng-template contextMenuItem (execute)="promoteToMain($event.item)">
    Promote to Main
  </ng-template>
  <ng-template contextMenuItem (execute)="removeAlt(playerMain, $event.item)">
    Delete
  </ng-template>

  <ng-template contextMenuItem divider="true"></ng-template>

  <ng-template contextMenuItem (execute)="viewBlizzardProfile($event.item)">
    View Blizzard Profile
  </ng-template>
  <ng-template contextMenuItem (execute)="viewRaiderIo($event.item)">
      View Raider.IO
    </ng-template>
  <ng-template contextMenuItem (execute)="viewWowProgress($event.item)">
    View WoW Progress
  </ng-template>
</context-menu>
